!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).oid={})}(this,(function(t){"use strict";var e,r={nativeRequire:"undefined"!=typeof __webpack_modules__?"function"==typeof __tybys_get_native_require__?__tybys_get_native_require__():"undefined"!=typeof __non_webpack_require__?__non_webpack_require__:undefined:"undefined"!=typeof __webpack_modules__?"undefined"!=typeof __non_webpack_require__?__non_webpack_require__:undefined:"undefined"!=typeof require?require:undefined}.nativeRequire;try{e=r("buffer").Buffer}catch(m){}var n=Object.prototype.toString;function i(t){return"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)}(t)}function o(t){if(e)return e.alloc(t);var r;if("undefined"!=typeof Uint8Array)return new Uint8Array(t);var n=[];for(r=0;r<t;r++)n[r]=0;return n}function a(t){if(t=t||0,e&&e.isBuffer(this))return this.readUInt32BE(t);var r=this[t],n=this[t+3];if(r===undefined||n===undefined)throw new RangeError("Attempt to write outside buffer bounds");return r*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+n}function s(t){if(e)return e.from(this).toString(t);var r,n,i,o,a,s="",f=0;if("hex"===t){for(s="",f=0;f<this.length;f++){var c=this[f].toString(16);s+=1===c.length?"0"+c:c}return s}if("binary"===t){for(s="",f=0;f<this.length;f++)s+=String.fromCharCode(this[f]);return s}for(r="",n=this.length,f=0;f<n;)switch((i=this[f++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(i);break;case 12:case 13:o=this[f++],r+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=this[f++],a=this[f++],r+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}return r}function f(t){for(var e=o(t),r=0;r<t;++r)e[r]=Math.floor(256*Math.random());return e}var c=f;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues&&"undefined"!=typeof Uint8Array)c=function(t){return window.crypto.getRandomValues(new Uint8Array(t))};else{try{c=r("crypto").randomBytes}catch(m){}null==c&&(c=f)}function u(t,e){return function(){console.warn(e);var r=Array.prototype.slice.call(arguments);return t.apply(this,r)}}var d,h=c(5),g=new RegExp("^[0-9a-fA-F]{24}$"),p=[];for(d=0;d<256;d++)p[d]=(d<=15?"0":"")+d.toString(16);var y,l=[];for(d=0;d<10;)l[48+d]=d++;for(;d<16;)l[55+d]=l[87+d]=d++;function _(t){if(!(this instanceof _))throw new TypeError("Class constructor ObjectId cannot be invoked without 'new'");if(t instanceof _)return t;if(null==t||"number"==typeof t)return this.id=_.generate(t),void(_.cacheHexString&&(this.__id=this.toString("hex")));var r=_.isValid(t);if(!r&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r&&"string"==typeof t&&24===t.length&&e)return new _(e.from(t,"hex"));if(r&&"string"==typeof t&&24===t.length)return _.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return _.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}i(t)?this.id=function(t){if(e)return e.from(t);var r;if("undefined"!=typeof Uint8Array){if("function"==typeof Uint8Array.from)return Uint8Array.from(t);var n=new Uint8Array(t.length);for(r=0;r<t.length;r++)n[r]=t[r];return n}var i=[];for(r=0;r<t.length;r++)i[r]=t[r];return i}(t):this.id=t,_.cacheHexString&&(this.__id=this.toString("hex"))}_.prototype.toHexString=function(){if(_.cacheHexString&&this.__id)return this.__id;var t,e,r,n,o="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(i(this.id))return t=this.id,o=s.call(t,"hex"),_.cacheHexString&&(this.__id=o),o;for(var a=0;a<this.id.length;a++){var f=p[this.id.charCodeAt(a)];if("string"!=typeof f)throw e=this.id,n=void 0,n=e[r=a],new TypeError('ObjectId string "'+e+'" contains invalid character "'+n+'" with character code ('+e.charCodeAt(r)+"). All character codes for a non-hex string must be less than 256.");o+=f}return _.cacheHexString&&(this.__id=o),o},_.getInc=function(){return _.index=(_.index+1)%16777215},_.generate=function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var e=_.getInc(),r=o(12);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,r[4]=h[0],r[5]=h[1],r[6]=h[2],r[7]=h[3],r[8]=h[4],r[11]=255&e,r[10]=e>>8&255,r[9]=e>>16&255,r},_.prototype.toString=function(t){return i(this.id)?s.call(this.id,"string"==typeof t?t:"hex"):this.toHexString()},_.prototype.toJSON=function(){return this.toHexString()},_.prototype.equals=function(t){return t instanceof _?this.toString()===t.toString():"string"==typeof t&&_.isValid(t)&&12===t.length&&i(this.id)?t===s.call(this.id,"binary"):"string"==typeof t&&_.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&_.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof _||t.toHexString))&&t.toHexString()===this.toHexString()},_.prototype.getTimestamp=function(){var t=new Date,e=a.call(this.id,0);return t.setTime(1e3*Math.floor(e)),t},_.createPk=function(){return new _},_.createFromTime=function(t){var e=o(12);return e[3]=255&t,e[2]=t>>8&255,e[1]=t>>16&255,e[0]=t>>24&255,new _(e)},_.createFromHexString=function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var e=o(12),r=0,n=0;n<24;)e[r++]=l[t.charCodeAt(n++)]<<4|l[t.charCodeAt(n++)];return new _(e)},_.isValid=function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&g.test(t):t instanceof _||(!(!i(t)||12!==t.length)||!!t.toHexString&&(12===t.id.length||24===t.id.length&&g.test(t.id)))))},_.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},_.fromExtendedJSON=function(t){return new _(t.$oid)},_.get_inc=u((function(){return _.getInc()}),"Please use the static `ObjectId.getInc()` instead"),_.prototype.get_inc=u((function(){return _.getInc()}),"Please use the static `ObjectId.getInc()` instead"),_.prototype.getInc=u((function(){return _.getInc()}),"Please use the static `ObjectId.getInc()` instead"),_.prototype.generate=u((function(t){return _.generate(t)}),"Please use the static `ObjectId.generate(time)` instead");try{Object.defineProperty(_.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(t){this.id[3]=255&t,this.id[2]=t>>8&255,this.id[1]=t>>16&255,this.id[0]=t>>24&255}})}catch(S){_.prototype.generationTime=0}try{y=r("util"),_.prototype[y.inspect.custom||"inspect"]=_.prototype.toString}catch(m){_.prototype.inspect=_.prototype.toString}_.index=~~(16777215*Math.random());try{Object.defineProperty(_.prototype,"_bsontype",{value:"ObjectID"})}catch(S){_.prototype._bsontype="ObjectID"}var b=_,w={ObjectId:b};t.ObjectId=b,t["default"]=w,(function(){try{return Object.defineProperty(t,"__esModule",{value:!0})}catch(_){return t.__esModule=!0,t}})()}));
